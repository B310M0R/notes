# Web pentest
## Content discovery
- review source code
- review files
- review actions in network
- robots.txt
- sitemap.xml
- framework detection
    - favicon inspection (`curl <url/favicon.ico | md5sum>` and compare it to [owasp_db](https://wiki.owasp.org/index.php/OWASP_favicon_database))
    - wappalyzer extension
    - source code/headers (`curl -v`)
- dorks
    - site:
    - inurl:
    - filetype:
    - intitle:
- wayback machine [link](https://archive.org/web/) (old versions of webpages)
- search for site/company name on github
- s3-buckets
S3 buckets could be detected with tools, by reviewing source code or by looking via `{name}.s3.amazonaws.com`, where name could be company name combined with smth like -assets, -www, -public, -private etc.
- tools:
[wordlists](https://github.com/danielmiessler/SecLists), `ffuf`, `dirb`, `gobuster`, `dirsearch` (favorite)  

## Subdomain enum
### OSINT
[crt.sh](http://crt.sh/)  
[ctsearch](https://ui.ctsearch.entrust.com/ui/ctsearchui)  
Dork: `-site:www.domain.com site:*.domain.com`  
This dork will reveal all subdomains except www. Could be combined with another exclusions  

### bruteforce
[dnsrecon](https://github.com/darkoperator/dnsrecon)  
`dnsrecon -t brt -d <host>`

### virtual hosts
some hosts could appear only on local machine (in /etc/hosts for example). In such case server understands what exact host we are looking by looking at `Host` header  
So we can tamper it to access internal hosts
```
ffuf -w /usr/share/wordlists/SecLists/Discovery/DNS/namelist.txt -H "Host: FUZZ.domain.com" -u "<url>"
```
Also we need to filter output with `-fs <size of page>`  

## Authentication bypass
### Username enum
We can use ffuf to enum existing usernames  
`ffuf -w /usr/share/wordlists/SecLists/Usernames/Names/names.txt -X POST -d "username=FUZZ&email=x&password=x&cpassword=x" -H "Content-Type: application/x-www-form-urlencoded" -u http://10.10.128.69/customers/signup -mr "username already exists"`  
`mr` is 'match http response data'